(this.webpackJsonplibrt1=this.webpackJsonplibrt1||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a(2),s=a.n(o),r=a(57),c=a.n(r),i=(a(70),a(19)),l=a(20),u=a(22),b=a(21),h=a(27),d=a(63),j=a(28),m=(a(71),a(72),a(73),j.a.initializeApp({apiKey:"AIzaSyCQ1QksR2lqnbWdSBSb7Z0Hec7vYgwtuP4",authDomain:"studentsmarket-6a095.firebaseapp.com",projectId:"studentsmarket-6a095",storageBucket:"studentsmarket-6a095.appspot.com",messagingSenderId:"787165538985",appId:"1:787165538985:web:02b113ae272e6ff87457b8",measurementId:"G-Y8QJ0RGJYC"}),j.a.analytics(),j.a.firestore()),p=a(24),f=a.n(p),O=(a(74),a(33)),x=a.n(O);a(92);var y=function(){var e=s.a.useState([]),t=Object(d.a)(e,2),a=t[0],o=t[1];s.a.useEffect((function(){m.collection("Books").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())}));o(t)}))}),[]);var r=a.map((function(e){return Object(n.jsx)(k,{book:e,style:{textDecoration:"none"}},e.id)}));return Object(n.jsxs)("div",{className:"BookCollection",children:[Object(n.jsx)("h1",{children:"Our Books"}),Object(n.jsx)("div",{className:"book-item-cont",children:r})]})};function k(e){var t=e.book,a=(t.name,t.email),o=t.title,s=t.id,r=t.price,c=t.sold;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"book-item",children:Object(n.jsxs)("button",{onClick:function(){var e="";e=e.concat("Would you like to buy ",o," for: ",r,"VND?"),c?f.a.error("The selected book has already been sold"):f.a.prompt(o,e,"Your Name",(function(e,t){var n={bookTitle:o,totalSale:r,preHeader:"Congrats your book was sold!",userEm:a};console.log(n),x()({headers:{"content-type":"application/json"},method:"post",url:"https://talktown.netlify.app/.netlify/functions/soldEmail",params:n}).then((function(e){return f.a.success("Your request was successful, please place your money for the book in the box and take the book you have bought.")})).catch((function(e){return f.a.error(e)})),m.collection("Books").doc(s).set({sold:!0,boughtBy:t},{merge:!0})}),(function(){f.a.error("Cancelled")})).set("labels",{ok:"Confirm",cancel:"Nevermind"})},children:[Object(n.jsx)("h1",{children:o}),Object(n.jsx)("p",{children:a}),Object(n.jsx)("p",{className:c?"sold":"available",children:c?"Sold":"Available"}),Object(n.jsxs)("p",{children:[r," VND"]})]})})})}var v=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"home",children:["This project is open source at ",Object(n.jsx)("a",{href:"https://github.com/Sirbot9988/StudentsMarket",children:"My Github"})]})}}]),a}(o.Component),g=(a(55),a(110)),C=(a(95),a(60)),B=a(13),w=a(32),N=a(40),I=a.n(N),S=a(59),T=a(26),D=a(111),E=a(109),L=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).props=e,n}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"confirmation-page",children:[Object(n.jsx)("h1",{children:"Congratulations your book has been listed!"}),Object(n.jsxs)("p",{children:["You may now close this tab, an email will be sent to your specified email address with a confirmation of your listing and your listing id. ",Object(n.jsx)("br",{}),"When your book is sold, a member from talktown will reach you in either form time, break time or lunch time. Please show them your ID to confirm you are the seller of the book. ",Object(n.jsx)("br",{}),"Do NOT share your ID to anyone you dont trust!"]})]})}}]),a}(o.Component),P=a(62),F=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).sendBooks=function(){var e=Object(S.a)(I.a.mark((function e(t){var a,o,s,r,c,i,l,u,b;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1,o=m.collection("Books"),s=n.state,r=s.userName,c=s.userBookTitle,i=s.userClass,l=s.userEm,u=s.userPrice,!(r&&c&&i&&l&&u)){e.next=10;break}return e.next=7,o.add({name:r,email:l,class:i,title:c,sold:!1,price:u,boughtBy:"",CreatedAt:P.a.firestore.FieldValue.serverTimestamp()}).then((function(e){a=e.id,!0})).catch((function(e){console.log("There was an error contacting the DB")}));case 7:n.setState({submitKeyid:a,submitted:!0}),b={bookTitle:c,totalSale:u,preHeader:"Congrats your book was listed successfully!",userEm:l,bookID:n.state.submitKeyid},x()({headers:{"content-type":"application/json"},method:"post",url:"https://talktown.netlify.app/.netlify/functions/bookListed",params:b}).then((function(e){return f.a.success("Your request was successful")})).catch((function(e){return f.a.error(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={userEm:"",userName:"",userClass:"",userBookTitle:"",submitted:!1,userPrice:0,submitKeyid:""},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.sendBooks=n.sendBooks.bind(Object(T.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(h.a)(Object(h.a)({},this.state),{},Object(w.a)({},e.target.name,t)))}},{key:"render",value:function(){return this.state.submitted?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(L,{submitID:this.state.submitKeyid})}):Object(n.jsx)("div",{className:"sell",children:Object(n.jsxs)(D.a,{onSubmit:this.sendBooks,className:"SellForm",children:[Object(n.jsxs)(D.a.Group,{controlId:"formBasicBookTitle",children:[Object(n.jsx)(D.a.Label,{children:"Book Title"}),Object(n.jsx)(D.a.Control,{type:"text",placeholder:"Little Red Riding Hood",value:this.state.userBookTitle,onChange:this.handleChange,name:"userBookTitle"}),Object(n.jsx)(D.a.Text,{className:"text-muted"})]}),Object(n.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(D.a.Label,{children:"Email"}),Object(n.jsx)(D.a.Control,{type:"email",placeholder:"sangwoo23@renaissance.edu.vn",value:this.state.userEm,onChange:this.handleChange,name:"userEm"})]}),Object(n.jsxs)(D.a.Group,{controlId:"formBasicClass",children:[Object(n.jsx)(D.a.Label,{children:"Class"}),Object(n.jsx)(D.a.Control,{type:"text",placeholder:"11W",value:this.state.userClass,onChange:this.handleChange,name:"userClass"})]}),Object(n.jsxs)(D.a.Group,{controlId:"formBasicName",children:[Object(n.jsx)(D.a.Label,{children:"Name"}),Object(n.jsx)(D.a.Control,{type:"text",placeholder:"Sang Woo",value:this.state.userName,onChange:this.handleChange,name:"userName"})]}),Object(n.jsxs)(D.a.Group,{controlId:"formBasicName",children:[Object(n.jsx)(D.a.Label,{children:"Price in VND"}),Object(n.jsx)(D.a.Control,{type:"number",placeholder:"96000",value:this.state.userPrice,onChange:this.handleChange,name:"userPrice"})]}),Object(n.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"}),Object(n.jsxs)("p",{className:"disclaimer",children:["Please be advised, Talktown will take a 5% commission off of your sale. ",Object(n.jsx)("br",{}),"A confirmation letter will be sent to your email, naming the details of your ",Object(n.jsx)("br",{}),"sale(including how much talktown will take from your sale) ",Object(n.jsx)("br",{}),"In the next few days, a member from talktown will contact you to find you and give you your payment ",Object(n.jsx)("br",{}),"either in lunch, break or ECA time."]})]})})}}]),a}(o.Component),G=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(C.a,{children:[Object(n.jsxs)(g.a,{variant:"pills ",defaultActiveKey:"/home",className:"navBar-sw",children:[Object(n.jsx)(g.a.Item,{children:Object(n.jsx)(g.a.Link,{href:"/",children:"Home"})}),Object(n.jsx)(g.a.Item,{children:Object(n.jsx)(g.a.Link,{href:"/app",eventKey:"link-1",children:"Buy Books"})}),Object(n.jsx)(g.a.Item,{children:Object(n.jsx)(g.a.Link,{href:"/sell",eventKey:"disabled",children:"Sell Books"})})]}),Object(n.jsxs)(B.c,{children:[Object(n.jsx)(B.a,{exact:!0,path:"/",component:v}),Object(n.jsx)(B.a,{path:"/app",component:y}),Object(n.jsx)(B.a,{path:"/sell",component:F})]})]})}}]),a}(o.Component),K=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(G,{})})}}]),a}(o.Component),A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,112)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),o(e),s(e),r(e)}))};c.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root")),A()},55:function(e,t,a){},70:function(e,t,a){},74:function(e,t,a){},95:function(e,t,a){}},[[107,1,2]]]);
//# sourceMappingURL=main.687a750f.chunk.js.map